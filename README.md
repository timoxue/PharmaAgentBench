# ğŸ§¬ PharmaAgentBench

**åŒ»è¯å¤§æ¨¡å‹è¯„æµ‹ç³»ç»Ÿ** - åŸºäº AgentScope å¤šæ™ºèƒ½ä½“æ¡†æ¶

å¯¹æ¯”è¯„æµ‹å›½äº§å¤§æ¨¡å‹ï¼ˆDeepSeek-V3ã€Qwen-Maxï¼‰ä¸å›½é™…æ ‡æ†ï¼ˆGemini 3 Proï¼‰åœ¨åŒ»è¯é¢†åŸŸçš„è¡¨ç°ã€‚

---

## ğŸ¯ é¡¹ç›®äº®ç‚¹

âœ… **å›½äº§å¯æ§ vs å›½é™…å…ˆè¿›** - ç›´æ¥å¯¹æ¯”å›½äº§å¤§æ¨¡å‹ä¸å›½é™…æ ‡æ†  
âœ… **Agentic èŒƒå¼è½åœ°** - å¤šæ™ºèƒ½ä½“åä½œå®ç°"ç”Ÿæˆ-å®¡æ ¸-æŠ¥å‘Š"é—­ç¯  
âœ… **åŒ»è¯åœºæ™¯æ·±åº¦å®šåˆ¶** - é’ˆå¯¹åˆ†å­è®¾è®¡ã€ADMETã€æ–‡çŒ®æŒ–æ˜ç­‰çœŸå®éœ€æ±‚  
âœ… **ç»“æœå¯è§£é‡Šã€å¯å±•ç¤º** - è‡ªåŠ¨ç”Ÿæˆé«˜ç®¡å‹å¥½çš„å¯è§†åŒ– HTML æŠ¥å‘Š

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
[ç”¨æˆ·è¾“å…¥ï¼šæµ‹è¯„ä»»åŠ¡é…ç½®]
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Orchestrator Agent   â”‚ â† ä¸»æ§æ™ºèƒ½ä½“ï¼ˆä»»åŠ¡åˆ†å‘ã€ç»“æœæ±‡æ€»ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Model Agent Poolâ”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ â€¢ DeepSeek Agentâ”‚ â† è°ƒç”¨ DeepSeek-V3 API
   â”‚ â€¢ Qwen Agent    â”‚ â† è°ƒç”¨ Qwen-Max API
   â”‚ â€¢ Gemini Agent  â”‚ â† è°ƒç”¨ Gemini 1.5 Pro API
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Auditor Agent   â”‚ â† ç»Ÿä¸€å®¡æ ¸ï¼ˆåŒ–å­¦åˆæ³•æ€§/æ¯’æ€§/ç±»è¯æ€§ï¼‰
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Reporter Agent  â”‚ â† ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Š
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å„æ™ºèƒ½ä½“èŒè´£

| æ™ºèƒ½ä½“ | åŠŸèƒ½ | æŠ€æœ¯å®ç° |
|--------|------|----------|
| **Orchestrator** | è§£æä»»åŠ¡ï¼Œåˆ†å‘ç»™ä¸‰æ¨¡å‹ï¼Œæ±‡æ€»ç»“æœ | AgentScope Sequential/Environment |
| **Model Agents** | è°ƒç”¨å„è‡ª APIï¼Œè¿”å› SMILES / JSON / æ–‡æœ¬ | OpenAI SDK / Google SDK |
| **Auditor** | éªŒè¯è¾“å‡ºåˆæ³•æ€§ã€ç±»è¯æ€§ã€æ¯’æ€§ | RDKit + è‡ªå®šä¹‰è§„åˆ™åº“ |
| **Reporter** | ç”Ÿæˆ HTML/PDF æŠ¥å‘Šï¼Œå«åˆ†å­å›¾å’Œé›·è¾¾å›¾ | Matplotlib + Jinja2 |

---

## ğŸ“¦ å®‰è£…

### 1. å…‹éš†ä»“åº“
```bash
git clone <your-repo-url>
cd PharmaAgentBench
```

### 2. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

**æ ¸å¿ƒä¾èµ–:**
- `agentscope` - å¤šæ™ºèƒ½ä½“æ¡†æ¶
- `openai` - DeepSeek/Qwen API å®¢æˆ·ç«¯
- `google-generativeai` - Gemini API å®¢æˆ·ç«¯
- `rdkit` - åŒ–å­¦éªŒè¯ï¼ˆå¯é€‰ï¼Œå»ºè®®å®‰è£…ï¼‰

### 3. é…ç½® API å¯†é’¥

ç¼–è¾‘ `config/api_keys.yaml`ï¼š

```yaml
# DeepSeek API é…ç½®
deepseek:
  api_key: "sk-xxxxx"  # å¡«å†™ä½ çš„å¯†é’¥
  base_url: "https://api.deepseek.com/v1"
  model: "deepseek-chat"

# Qwen API é…ç½®
qwen:
  api_key: "sk-xxxxx"  # å¡«å†™ä½ çš„å¯†é’¥
  base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
  model: "qwen-max"

# Gemini API é…ç½®
gemini:
  api_key: "xxxxx"     # å¡«å†™ä½ çš„å¯†é’¥
  model: "gemini-1.5-pro"
```

**æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š**
```bash
export DEEPSEEK_API_KEY="sk-xxxxx"
export DASHSCOPE_API_KEY="sk-xxxxx"
export GEMINI_API_KEY="xxxxx"
```

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿå¼€å§‹ - è¿è¡Œæ¼”ç¤º

```bash
python main.py --demo
```

è¿™å°†æ‰§è¡Œä¸€ä¸ªé¢„è®¾çš„åˆ†å­ç”Ÿæˆä»»åŠ¡ï¼ˆEGFR æŠ‘åˆ¶å‰‚è®¾è®¡ï¼‰ã€‚

### äº¤äº’å¼æ¨¡å¼

```bash
python main.py
```

ç„¶åæ ¹æ®æç¤ºé€‰æ‹©ä»»åŠ¡ç±»å‹å¹¶è¾“å…¥ç›®æ ‡æè¿°ã€‚

### æ”¯æŒçš„ä»»åŠ¡ç±»å‹

1. **åˆ†å­ç”Ÿæˆ** (`molecule_generation`)
   - åŸºäºé¶ç‚¹çš„ä»å¤´è¯ç‰©è®¾è®¡
   - å…ˆå¯¼åŒ–åˆç‰©ä¼˜åŒ–
   - ç¤ºä¾‹ï¼š*"è®¾è®¡ä¸€ä¸ªé’ˆå¯¹ EGFR T790M çªå˜ä½“çš„å°åˆ†å­æŠ‘åˆ¶å‰‚"*

2. **æ–‡çŒ®ä¿¡æ¯æå–** (`literature_extraction`)
   - ä»åŒ»è¯æ–‡çŒ®ä¸­æå–åˆ†å­ç»“æ„å’Œä¸´åºŠæ•°æ®
   - ç¤ºä¾‹ï¼š*"æå– PD-1/PD-L1 æŠ‘åˆ¶å‰‚çš„ä¸´åºŠè¯•éªŒæ•°æ®"*

3. **ADMET é¢„æµ‹** (`admet_prediction`)
   - é¢„æµ‹å¸æ”¶ã€åˆ†å¸ƒã€ä»£è°¢ã€æ’æ³„å’Œæ¯’æ€§
   - ç¤ºä¾‹ï¼š*"é¢„æµ‹ CC(C)Cc1ccc(cc1)C(C)C(O)=O çš„ ADMET æ€§è´¨"*

---

## ğŸ“Š æŠ¥å‘Šç¤ºä¾‹

è¿è¡Œåä¼šåœ¨ `reports/` ç›®å½•ç”Ÿæˆ HTML æŠ¥å‘Šï¼š

```
reports/
â””â”€â”€ report_molecule_generation_20251210_143022.html
```

æŠ¥å‘ŠåŒ…å«ï¼š
- âœ… ä»»åŠ¡ä¿¡æ¯æ¦‚è§ˆ
- âœ… ä¸‰æ¨¡å‹å¯¹æ¯”è¡¨æ ¼ï¼ˆçŠ¶æ€ã€è­¦å‘Šã€é”™è¯¯ï¼‰
- âœ… è¯¦ç»†çš„æ¨¡å‹è¾“å‡ºï¼ˆJSON æ ¼å¼åŒ–ï¼‰
- âœ… åŒ–å­¦éªŒè¯ç»“æœï¼ˆLipinski è§„åˆ™ã€QED è¯„åˆ†ï¼‰
- âœ… æ¯’æ€§è­¦å‘Šï¼ˆPAINSã€ç»“æ„è­¦æŠ¥ï¼‰

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
PharmaAgentBench/
â”œâ”€â”€ agents/                      # æ™ºèƒ½ä½“æ¨¡å—
â”‚   â”œâ”€â”€ orchestrator_agent.py   # ä¸»æ§æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ deepseek_agent.py        # DeepSeek æ¨¡å‹æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ qwen_agent.py            # Qwen æ¨¡å‹æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ gemini_agent.py          # Gemini æ¨¡å‹æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ auditor_agent.py         # å®¡æ ¸æ™ºèƒ½ä½“
â”‚   â””â”€â”€ reporter_agent.py        # æŠ¥å‘Šç”Ÿæˆæ™ºèƒ½ä½“
â”œâ”€â”€ prompts/                     # Prompt æ¨¡æ¿
â”‚   â”œâ”€â”€ molecule_generation.yaml
â”‚   â”œâ”€â”€ literature_extraction.yaml
â”‚   â””â”€â”€ admet_protocol.yaml
â”œâ”€â”€ evaluators/                  # è¯„æµ‹å™¨æ¨¡å—
â”‚   â”œâ”€â”€ chem_validator.py        # åŒ–å­¦éªŒè¯å™¨ï¼ˆRDKitï¼‰
â”‚   â””â”€â”€ similarity_checker.py    # ç›¸ä¼¼åº¦æ£€æŸ¥å™¨
â”œâ”€â”€ config/                      # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ api_keys.yaml            # API å¯†é’¥é…ç½®
â”‚   â””â”€â”€ __init__.py              # é…ç½®ç®¡ç†å™¨
â”œâ”€â”€ reports/                     # ç”Ÿæˆçš„æŠ¥å‘Š
â”œâ”€â”€ main.py                      # å¯åŠ¨å…¥å£
â”œâ”€â”€ requirements.txt             # ä¾èµ–åˆ—è¡¨
â””â”€â”€ README.md                    # é¡¹ç›®æ–‡æ¡£
```

---

## ğŸ”¬ æŠ€æœ¯æ ˆ

- **å¤šæ™ºèƒ½ä½“æ¡†æ¶**: [AgentScope](https://github.com/modelscope/agentscope) (é˜¿é‡Œå¼€æº)
- **å¤§æ¨¡å‹ API**:
  - DeepSeek-V3 (å›½äº§)
  - Qwen-Max (å›½äº§)
  - Gemini 1.5 Pro (å›½é™…)
- **åŒ–å­¦ä¿¡æ¯å­¦**: RDKit (åˆ†å­éªŒè¯ã€æ€§è´¨è®¡ç®—)
- **é…ç½®ç®¡ç†**: PyYAML
- **æŠ¥å‘Šç”Ÿæˆ**: HTML + CSS (æ— éœ€é¢å¤–åº“)

---

## ğŸ“ é…ç½®è¯´æ˜

### API å¯†é’¥è·å–

1. **DeepSeek**: https://platform.deepseek.com/
2. **Qwen (DashScope)**: https://dashscope.aliyun.com/
3. **Gemini**: https://ai.google.dev/

### è‡ªå®šä¹‰ Prompt

ç¼–è¾‘ `prompts/*.yaml` æ–‡ä»¶å¯è‡ªå®šä¹‰ä»»åŠ¡æç¤ºè¯ï¼š

```yaml
system_prompt: |
  ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è¯ç‰©åŒ–å­¦AIåŠ©æ‰‹...

user_prompt_template: |
  ## åˆ†å­è®¾è®¡ä»»åŠ¡
  **ç›®æ ‡**: {target}
  ...
```

---

## ğŸ› ï¸ å¼€å‘

### è¿è¡Œæµ‹è¯•

```bash
pytest tests/
```

### ä»£ç æ ¼å¼åŒ–

```bash
black .
flake8 .
```

### æ·»åŠ æ–°æ¨¡å‹

1. åœ¨ `agents/` ä¸‹åˆ›å»ºæ–°çš„æ™ºèƒ½ä½“ç±»ï¼ˆç»§æ‰¿ `AgentBase`ï¼‰
2. åœ¨ `orchestrator_agent.py` ä¸­æ³¨å†Œæ–°æ¨¡å‹
3. åœ¨ `config/api_keys.yaml` ä¸­æ·»åŠ  API é…ç½®

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ™ è‡´è°¢

- [AgentScope](https://github.com/modelscope/agentscope) - å¤šæ™ºèƒ½ä½“æ¡†æ¶
- [RDKit](https://www.rdkit.org/) - åŒ–å­¦ä¿¡æ¯å­¦å·¥å…·
- DeepSeekã€Qwenã€Gemini å›¢é˜Ÿ

---

## ğŸ“§ è”ç³»

å¦‚æœ‰é—®é¢˜è¯·æäº¤ Issue æˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

**Built with â¤ï¸ for Pharmaceutical AI Research**
